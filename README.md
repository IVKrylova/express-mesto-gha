# Бэкенд проекта Mesto
**Проектная работа для Яндекс.Практикум (спринты 13-14)** <br>

## Описание
Проект - сервер для Mesto. Он умеет проверять токены, регистрировать и авторизовывать пользователей, сохранять и отдавать карточки, запоминать, когда кто-то поставил лайк или передумал и убрал его. 

## Используемые технологии
1. Express.js
2. MongoDB
3. REST API

## Инструменты
1. MongoDB Compass
2. Postman

## Схемы и модели
1. Коллекция пользователей. Поля её схемы:
* name — имя пользователя, строка от 2 до 30 символов, обязательное поле;
* about — информация о пользователе, строка от 2 до 30 символов, обязательное поле;
* avatar — ссылка на аватарку, строка, обязательное поле. В следующем спринте вы напишите собственное решение для валидации этого поля.
2. Коллекция карточек. Поля её схемы:
* name — имя карточки, строка от 2 до 30 символов, обязательное поле;
* link — ссылка на картинку, строка, обязательно поле.
* owner — ссылка на модель автора карточки, тип ObjectId, обязательное поле;
* likes — список лайкнувших пост пользователей, массив ObjectId, по умолчанию — пустой массив; 
* createdAt — дата создания, тип Date, значение по умолчанию Date.now.
  
## Роуты
* GET `/users` — возвращает всех пользователей;
* GET `/users/:userId` — возвращает пользователя по _id;
* POST `/users` — создаёт пользователя;
* GET `/cards` — возвращает все карточки;
* POST `/cards` — создаёт карточку;
* DELETE `/cards/:cardId` — удаляет карточку по идентификатору;
* PATCH `/users/me` — обновляет профиль;
* PATCH `/users/me/avatar` — обновляет аватар;
* PUT `/cards/:cardId/likes` — поставить лайк карточке;
* DELETE `/cards/:cardId/likes` — убрать лайк с карточки;
* POST `/signin` — авторизация;
* POST `/signup` — регистрация;
* GET `/users/me` - возвращает информацию о текущем пользователе.

## Ошибки и безопасность
* Реализована централизованная обработка ошибок, созданы конструкторы 400, 401, 403, 404 и 409 ошибок.
* Для защиты приложения от веб-уязвимостей путем соответствующей настройки заголовков HTTP используется npm helmet.
* Приходящие на сервер запросы валидируются с помощью Joi и celebrate.
* Данные валидируются на уровне схемы.
* Настроены кросс-доменные запросы (CORS).
* Ключи хранятся в файле .env
  
## Запуск проекта
`npm run start` — запускает сервер   
`npm run dev` — запускает сервер с hot-reload

## Интересные ссылки
Фронтенд проекта Mesto можно посмотреть [здесь](https://github.com/IVKrylova/react-mesto-auth).
Репозиторий с собранным фронтендом и бэкендом и ссылкой на сайт можно посмотреть [здесь](https://github.com/IVKrylova/react-mesto-api-full).
